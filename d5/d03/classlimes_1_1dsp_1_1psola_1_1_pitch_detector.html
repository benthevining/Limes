<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Limes: limes::dsp::psola::PitchDetector&lt; SampleType &gt; Class Template Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "ams.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Limes
   &#160;<span id="projectnumber">4.8.1</span>
   </div>
   <div id="projectbrief">C++ utilities and building blocks</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d9/db5/classlimes_1_1dsp_1_1psola_1_1_pitch_detector-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">limes::dsp::psola::PitchDetector&lt; SampleType &gt; Class Template Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="../../d1/dbd/group__limes.html">Limes</a> &raquo; <a class="el" href="../../d0/d7b/group__limes__audio.html">limes_audio</a> &raquo; <a class="el" href="../../d2/d79/group__psola.html">PSOLA</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../dc/ddf/_pitch_detector_8h_source.html">PitchDetector.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a1febe22aa26291b78b1959fd9cbb08e7"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a1febe22aa26291b78b1959fd9cbb08e7">SampleVector</a> = <a class="el" href="../../df/d0d/classlimes_1_1ds_1_1scalar__vector.html">ds::scalar_vector</a>&lt; SampleType &gt;</td></tr>
<tr class="memdesc:a1febe22aa26291b78b1959fd9cbb08e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convenience typedef for a vector of samples.  <a href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a1febe22aa26291b78b1959fd9cbb08e7">More...</a><br /></td></tr>
<tr class="separator:a1febe22aa26291b78b1959fd9cbb08e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2c6f9aea5333c7a1a221305cffe27955"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a2c6f9aea5333c7a1a221305cffe27955">PitchDetector</a> (int minFreqHz=60, float confidenceThreshold=0.15f)</td></tr>
<tr class="memdesc:a2c6f9aea5333c7a1a221305cffe27955"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a pitch detector with an initial minimum detectable frequency and confidence threshold.  <a href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a2c6f9aea5333c7a1a221305cffe27955">More...</a><br /></td></tr>
<tr class="separator:a2c6f9aea5333c7a1a221305cffe27955"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afecb34f51d61ea6083fe1cf20750442d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#afecb34f51d61ea6083fe1cf20750442d">getCurrentLegalPeriodRange</a> (int &amp;min, int &amp;max) const noexcept</td></tr>
<tr class="memdesc:afecb34f51d61ea6083fe1cf20750442d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current legal period range for the last analyzed frame of audio.  <a href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#afecb34f51d61ea6083fe1cf20750442d">More...</a><br /></td></tr>
<tr class="separator:afecb34f51d61ea6083fe1cf20750442d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cf882fe60d48ddd3beaf278db212ef7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a4cf882fe60d48ddd3beaf278db212ef7">getLatencySamples</a> () const noexcept</td></tr>
<tr class="memdesc:a4cf882fe60d48ddd3beaf278db212ef7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the latency in samples of the detection algorithm.  <a href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a4cf882fe60d48ddd3beaf278db212ef7">More...</a><br /></td></tr>
<tr class="separator:a4cf882fe60d48ddd3beaf278db212ef7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9107221fa4c44e8c75374ddc89ceb222"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a9107221fa4c44e8c75374ddc89ceb222">getMinHz</a> () const noexcept</td></tr>
<tr class="memdesc:a9107221fa4c44e8c75374ddc89ceb222"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the minimum frequency in Hz that this pitch detector is configured to detect.  <a href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a9107221fa4c44e8c75374ddc89ceb222">More...</a><br /></td></tr>
<tr class="separator:a9107221fa4c44e8c75374ddc89ceb222"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c566764e1431c5bda0002634366b9f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a3c566764e1431c5bda0002634366b9f9">releaseResources</a> ()</td></tr>
<tr class="memdesc:a3c566764e1431c5bda0002634366b9f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases all of the pitch detector's internal resources.  <a href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a3c566764e1431c5bda0002634366b9f9">More...</a><br /></td></tr>
<tr class="separator:a3c566764e1431c5bda0002634366b9f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac96adde0c5cebf27e7798fb0716bcb8f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#ac96adde0c5cebf27e7798fb0716bcb8f">reset</a> () noexcept</td></tr>
<tr class="memdesc:ac96adde0c5cebf27e7798fb0716bcb8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the internal state of the pitch detector without releasing any resources.  <a href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#ac96adde0c5cebf27e7798fb0716bcb8f">More...</a><br /></td></tr>
<tr class="separator:ac96adde0c5cebf27e7798fb0716bcb8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a590978d795d1c10924e5f9f4b90f01ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a590978d795d1c10924e5f9f4b90f01ab">setConfidenceThresh</a> (float newThresh) noexcept</td></tr>
<tr class="memdesc:a590978d795d1c10924e5f9f4b90f01ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the confidence threshold of the pitch detection algorithm.  <a href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a590978d795d1c10924e5f9f4b90f01ab">More...</a><br /></td></tr>
<tr class="separator:a590978d795d1c10924e5f9f4b90f01ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae80853bc6dc61a8e568b677a0e352be1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#ae80853bc6dc61a8e568b677a0e352be1">setMinHz</a> (int newMinHz)</td></tr>
<tr class="memdesc:ae80853bc6dc61a8e568b677a0e352be1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the minimum detectable frequency for the pitch detector.  <a href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#ae80853bc6dc61a8e568b677a0e352be1">More...</a><br /></td></tr>
<tr class="separator:ae80853bc6dc61a8e568b677a0e352be1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cad6007fd0a2c642b4aa47af41c5e26"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a8cad6007fd0a2c642b4aa47af41c5e26">setSamplerate</a> (double newSamplerate)</td></tr>
<tr class="memdesc:a8cad6007fd0a2c642b4aa47af41c5e26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the samplerate in Hz of the pitch detector.  <a href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a8cad6007fd0a2c642b4aa47af41c5e26">More...</a><br /></td></tr>
<tr class="separator:a8cad6007fd0a2c642b4aa47af41c5e26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Moving and copying</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>I don't really see a use case for copying these objects around, but there's no reason to prevent you from doing so.</p>
<p>PitchDetectors are stateful, but their state can easily be copied and moved between objects. </p>
</div></td></tr>
<tr class="memitem:a15576f97d4d4cd944866f20ebc1b9f25"><td class="memItemLeft" align="right" valign="top"><a id="a15576f97d4d4cd944866f20ebc1b9f25"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>LIMES_DEFAULT_MOVABLE</b> (<a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">PitchDetector</a>)</td></tr>
<tr class="separator:a15576f97d4d4cd944866f20ebc1b9f25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe943fba1a43addc2315f070c2dc7560"><td class="memItemLeft" align="right" valign="top"><a id="abe943fba1a43addc2315f070c2dc7560"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>LIMES_DEFAULT_COPYABLE</b> (<a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">PitchDetector</a>)</td></tr>
<tr class="separator:abe943fba1a43addc2315f070c2dc7560"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Pitch detection</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Detect the pitch in Hz </p>
</div></td></tr>
<tr class="memitem:a1a17e045d7ddc2045843b20e33d1252f"><td class="memItemLeft" align="right" valign="top">SampleType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a1a17e045d7ddc2045843b20e33d1252f">detectPitch</a> (const SampleType *const inputAudio, int numSamples) noexcept</td></tr>
<tr class="memdesc:a1a17e045d7ddc2045843b20e33d1252f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detects the pitch in Hz for a frame of audio.  <a href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a1a17e045d7ddc2045843b20e33d1252f">More...</a><br /></td></tr>
<tr class="separator:a1a17e045d7ddc2045843b20e33d1252f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a359eea93618220f8ce82fa28d24c9353"><td class="memItemLeft" align="right" valign="top">SampleType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a359eea93618220f8ce82fa28d24c9353">detectPitch</a> (const <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a1febe22aa26291b78b1959fd9cbb08e7">SampleVector</a> &amp;inputAudio) noexcept</td></tr>
<tr class="memdesc:a359eea93618220f8ce82fa28d24c9353"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detects the pitch in Hz for a frame of audio.  <a href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a359eea93618220f8ce82fa28d24c9353">More...</a><br /></td></tr>
<tr class="separator:a359eea93618220f8ce82fa28d24c9353"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Period detection</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Detect the period in samples </p>
</div></td></tr>
<tr class="memitem:aad4a032ff1700b4ca01ee030be7d38ac"><td class="memItemLeft" align="right" valign="top">SampleType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#aad4a032ff1700b4ca01ee030be7d38ac">detectPeriod</a> (const SampleType *const inputAudio, int numSamples) noexcept</td></tr>
<tr class="memdesc:aad4a032ff1700b4ca01ee030be7d38ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detects the period, in samples, for a frame of audio.  <a href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#aad4a032ff1700b4ca01ee030be7d38ac">More...</a><br /></td></tr>
<tr class="separator:aad4a032ff1700b4ca01ee030be7d38ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e6d0e12c7d6382edf04aa780ffa65a9"><td class="memItemLeft" align="right" valign="top">SampleType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a3e6d0e12c7d6382edf04aa780ffa65a9">detectPeriod</a> (const <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a1febe22aa26291b78b1959fd9cbb08e7">SampleVector</a> &amp;inputAudio) noexcept</td></tr>
<tr class="memdesc:a3e6d0e12c7d6382edf04aa780ffa65a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detects the period, in samples, for a frame of audio.  <a href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a3e6d0e12c7d6382edf04aa780ffa65a9">More...</a><br /></td></tr>
<tr class="separator:a3e6d0e12c7d6382edf04aa780ffa65a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;Sample SampleType&gt;<br />
class limes::dsp::psola::PitchDetector&lt; SampleType &gt;</h3>

<p>A pitch detector based on the YIN algorithm.</p>
<p>A pitch detection algorithm based on the influential YIN <b>[de_cheveigne_kawahara_2002]</b> paper, with a few alterations of my own.</p>
<h1><a class="anchor" id="algorithm"></a>
The algorithm</h1>
<h2><a class="anchor" id="difference"></a>
The difference function</h2>
<p>The core of the algorithm is the difference function, defined as: </p><p class="formulaDsp">
\[ d_t(\tau)=\sum\limits_{j=t}^{j&lt;N-\tau} (x_j-x_{j+\tau})^2 \]
</p>
 <p class="formulaDsp">
\[ D(\tau)=\sum\limits_{t=0}^{t&lt;N} d_t(\tau) \]
</p>
<p> where:</p><ul>
<li>\( d_t(\tau) \) is the autocorrelation function at lag \( \tau \) of input signal \( x \) at sample \( t \);</li>
<li>\( D(\tau) \) is the summation of all values \( d_t(\tau) \) for each sample index \( t \) in the current frame of audio of length \( N \).</li>
</ul>
<p>This autocorrelation function is calculated for every lag \( \tau \) within the set of possible period values, and the \( \tau \) value whose autocorrelation function shows the lowest amount of difference between the original and delayed signal (ie, the lowest value of \( D(\tau) \)) is determined to be the period.</p>
<h3><a class="anchor" id="diff_candidates"></a>
The initial set of period candidates</h3>
<p>The set of possible period candidates ( \( \tau \) values for which the difference function must be calculated) is usually defined by the size of the audio blocks being processed by the pitch detector. Because at least one repetition of a period is needed to detect it, the maximum period detectable when analyzing any frame of audio is \( \tau=\frac{N}{2} \), where \( N \) is the number of samples. </p><dl class="section note"><dt>Note</dt><dd>This is why the detector's latency is defined as 2 * the period of the minimum detectable frequency.</dd></dl>
<p>The minimum detectable period can be arbitrarily small, as low as 1 sample, though in this implementation the smallest \( \tau \) value ever tested is 4 samples.</p>
<p>One change I have made to this implementation from the YIN paper is to attempt to limit the set of \( \tau \) values being tested for each frame, instead of always calculating the difference function for every \( \tau \) value \( [4,\frac{N}{2}] \). This is desirable for both performance and accuracy &ndash; for consecutive pitched frames, we can elimate some octave errors by assuming the pitch is more likely to be closer to the previous frame's pitch.</p>
<p>In this implementation, I assume that the period should not halve or double between consecutive pitched frames. So, if the previous frame was unpitched, every \( \tau \) value \( [4,\frac{N}{2}] \) is tested. However, if the previous frame was pitched, then this frame's initial set of possible \( \tau \) values is limited to \( [\frac{\tau\prime}{2},\tau\prime*2] \), where \( \tau\prime \) is the previous frame's period.</p>
<dl class="section note"><dt>Note</dt><dd>If your input audio <em>is</em> expected to jump significantly between frames, you can call <code><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#ac96adde0c5cebf27e7798fb0716bcb8f" title="Resets the internal state of the pitch detector without releasing any resources.">PitchDetector::reset()</a></code> between each analysis call. This method resets the internal state without freeing resources, and is safe to call from the audio thread.</dd></dl>
<h2><a class="anchor" id="cmndf"></a>
The cumulative mean normalized difference function</h2>
<p>To attempt to stabilize results for different integration window sizes across a frame of audio, the YIN paper introduces the concept of a cumulative mean normalized difference function, which is defined as: </p><p class="formulaDsp">
\[ d\prime_t(\tau)=\frac{d_t(\tau)}{(1/\tau)\sum\limits_{i=1}^{\tau}d_t(i)} \]
</p>
<p>Essentially, the result of the original difference function is divided by its average over shorter-lag values. The final summation step then becomes: </p><p class="formulaDsp">
\[ D(\tau)=\sum\limits_{t=0}^{t&lt;N} \frac{d_t(\tau)}{(1/\tau)\sum\limits_{i=1}^{\tau}d_t(i)} \]
</p>
<h2><a class="anchor" id="thresh"></a>
Absolute threshold</h2>
<p>Once the cumulative mean normalized difference function has been applied, the \( D(\tau) \) values are suitably normalized, allowing us to apply a simple threshold to the entire set of \( D(\tau) \) values for each \( \tau \) in the range of possible periods.</p>
<p>This threshold value can be thought of as the amount of aperiodic power tolerable in a signal determined to be pitched. In other words, the lower this value is, the "stricter" the pitch detector is in choosing its pitch estimates. When this value is 1, the pitch detector might output a "pitch" value for a frame of random noise; when this value is 0, the pitch detector might say that even a perfect, pure sine wave is "unpitched". Typical recommended values are between 0.1 and 0.3.</p>
<p>The YIN paper recommends to implement this threshold such that the smallest value of \( D(\tau) \) is chosen that gives a minimum of \( d\prime_t(\tau) \) that is lower than our threshold. In other words, we choose the smallest period that satisfies our periodicity threshold. The exact value of this threshold does not critically affect error rates, though it can be tuned for specific use cases to provide more optimal results.</p>
<h2><a class="anchor" id="interp"></a>
Parabolic interpolation</h2>
<p>Finally, once we've determined an integer estimate of \( \tau \) that is the best candidate to be the period, parabolic interpolation is used to determine the actual period (which probably is not an even number of samples).</p>
<p>Interpolation is done by looking at local minima of the set of \( D(\tau) \) values around our candidate \( \tau \), and the abscissa of the chosen minimum becomes the actual period estimate. To avoid any biasing in this interpolation step, the <em>raw</em> difference function data is used &ndash; \( d_t(\tau) \), not \( d\prime_t(\tau) \).</p>
<h1><a class="anchor" id="Discussion"></a>
Discussion</h1>
<p>This pitch detection algorithm is performed entirely in the time domain.</p>
<p>The detector is stateful; it assumes that the input pitch shouldn't halve or double between consecutive pitched frames of audio, and uses this heuristic to limit its period search range for each frame of audio. Limiting the number of possible period candidates reduces the number of times the difference function needs to be calculated.</p>
<p>Pitch detector objects can only be used for one channel of audio at a time, because they are stateful. If you need to run pitch detection on multiple channels of audio, you need multiple <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">PitchDetector</a> objects.</p>
<h1><a class="anchor" id="Latency"></a>
Latency</h1>
<p>The latency of the algorithm is determined by 2 times the period of the lowest detectable frequency; therefore, detectors configured to not try to detect lower pitches will have less latency. You can adjust the lowest detectable frequency of the pitch detector to fit your needs.</p>
<dl class="section warning"><dt>Warning</dt><dd>This class does not do any internal buffering; the caller must ensure that the buffers sent to the detection functions contain enough samples for the detection algorithm. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/ddf/_pitch_detector_8h_source.html#l00164">164</a> of file <a class="el" href="../../dc/ddf/_pitch_detector_8h_source.html">PitchDetector.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a1febe22aa26291b78b1959fd9cbb08e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1febe22aa26291b78b1959fd9cbb08e7">&#9670;&nbsp;</a></span>SampleVector</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;Sample SampleType&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">limes::dsp::psola::PitchDetector</a>&lt; SampleType &gt;::<a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a1febe22aa26291b78b1959fd9cbb08e7">SampleVector</a> =  <a class="el" href="../../df/d0d/classlimes_1_1ds_1_1scalar__vector.html">ds::scalar_vector</a>&lt;SampleType&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convenience typedef for a vector of samples. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/ddf/_pitch_detector_8h_source.html#l00169">169</a> of file <a class="el" href="../../dc/ddf/_pitch_detector_8h_source.html">PitchDetector.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a2c6f9aea5333c7a1a221305cffe27955"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c6f9aea5333c7a1a221305cffe27955">&#9670;&nbsp;</a></span>PitchDetector()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;Sample SampleType&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">limes::dsp::psola::PitchDetector</a>&lt; SampleType &gt;::<a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">PitchDetector</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>minFreqHz</em> = <code>60</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>confidenceThreshold</em> = <code>0.15f</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a pitch detector with an initial minimum detectable frequency and confidence threshold. </p>
<p>The latency of the algorithm is determined by 2 * the period of the minimum frequency. Therefore, pitch detectors with a higher minimum frequency will have a lower latency. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">minFreqHz</td><td>The minimum frequency that this pitch detector will be able to detect. </td></tr>
    <tr><td class="paramname">confidenceThreshold</td><td>The initial YIN confidence threshold for the detector. See the <code><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a590978d795d1c10924e5f9f4b90f01ab" title="Sets the confidence threshold of the pitch detection algorithm.">setConfidenceThresh()</a></code> method for more documentation on this. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a4cf882fe60d48ddd3beaf278db212ef7" title="Returns the latency in samples of the detection algorithm.">getLatencySamples()</a>, <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a590978d795d1c10924e5f9f4b90f01ab" title="Sets the confidence threshold of the pitch detection algorithm.">setConfidenceThresh()</a>, <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#ae80853bc6dc61a8e568b677a0e352be1" title="Sets the minimum detectable frequency for the pitch detector.">setMinHz()</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aad4a032ff1700b4ca01ee030be7d38ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad4a032ff1700b4ca01ee030be7d38ac">&#9670;&nbsp;</a></span>detectPeriod() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;Sample SampleType&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SampleType <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">limes::dsp::psola::PitchDetector</a>&lt; SampleType &gt;::detectPeriod </td>
          <td>(</td>
          <td class="paramtype">const SampleType *const&#160;</td>
          <td class="paramname"><em>inputAudio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numSamples</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Detects the period, in samples, for a frame of audio. </p>
<p>This can only be used for one channel at a time. If you need to track the pitch of multiple channels of audio, you need one <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">PitchDetector</a> object for each channel. The caller must ensure that there are at least enough samples in this frame of audio for analysis to be performed; ie, that numSamples is greater than or equal to <code><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a4cf882fe60d48ddd3beaf278db212ef7" title="Returns the latency in samples of the detection algorithm.">getLatencySamples()</a></code>. </p><dl class="section note"><dt>Note</dt><dd>You must call <code><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a8cad6007fd0a2c642b4aa47af41c5e26" title="Sets the samplerate in Hz of the pitch detector.">setSamplerate()</a></code> to prepare the pitch detector before calling this function! </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The caller must ensure that the buffer sent to this function contains at least <code><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a4cf882fe60d48ddd3beaf278db212ef7" title="Returns the latency in samples of the detection algorithm.">getLatencySamples()</a></code> samples. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The period, in samples, of the fundamental frequency for this frame of audio, or 0 if the frame is unpitched. </dd></dl>

</div>
</div>
<a id="a3e6d0e12c7d6382edf04aa780ffa65a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e6d0e12c7d6382edf04aa780ffa65a9">&#9670;&nbsp;</a></span>detectPeriod() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;Sample SampleType&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SampleType <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">limes::dsp::psola::PitchDetector</a>&lt; SampleType &gt;::detectPeriod </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a1febe22aa26291b78b1959fd9cbb08e7">SampleVector</a> &amp;&#160;</td>
          <td class="paramname"><em>inputAudio</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Detects the period, in samples, for a frame of audio. </p>
<p>This can only be used for one channel at a time. If you need to track the pitch of multiple channels of audio, you need one <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">PitchDetector</a> object for each channel. The caller must ensure that there are at least enough samples in this frame of audio for analysis to be performed; ie, that numSamples is greater than or equal to <code><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a4cf882fe60d48ddd3beaf278db212ef7" title="Returns the latency in samples of the detection algorithm.">getLatencySamples()</a></code>. </p><dl class="section note"><dt>Note</dt><dd>You must call <code><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a8cad6007fd0a2c642b4aa47af41c5e26" title="Sets the samplerate in Hz of the pitch detector.">setSamplerate()</a></code> to prepare the pitch detector before calling this function! </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The caller must ensure that the buffer sent to this function contains at least <code><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a4cf882fe60d48ddd3beaf278db212ef7" title="Returns the latency in samples of the detection algorithm.">getLatencySamples()</a></code> samples. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The period, in samples, of the fundamental frequency for this frame of audio, or 0 if the frame is unpitched. </dd></dl>

</div>
</div>
<a id="a1a17e045d7ddc2045843b20e33d1252f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a17e045d7ddc2045843b20e33d1252f">&#9670;&nbsp;</a></span>detectPitch() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;Sample SampleType&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SampleType <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">limes::dsp::psola::PitchDetector</a>&lt; SampleType &gt;::detectPitch </td>
          <td>(</td>
          <td class="paramtype">const SampleType *const&#160;</td>
          <td class="paramname"><em>inputAudio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numSamples</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Detects the pitch in Hz for a frame of audio. </p>
<p>This can only be used for one channel at a time. If you need to track the pitch of multiple channels of audio, you need one <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">PitchDetector</a> object for each channel. The caller must ensure that there are at least enough samples in this frame of audio for analysis to be performed; ie, that numSamples is greater than or equal to <code><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a4cf882fe60d48ddd3beaf278db212ef7" title="Returns the latency in samples of the detection algorithm.">getLatencySamples()</a></code>. </p><dl class="section note"><dt>Note</dt><dd>You must call <code><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a8cad6007fd0a2c642b4aa47af41c5e26" title="Sets the samplerate in Hz of the pitch detector.">setSamplerate()</a></code> to prepare the pitch detector before calling this function! </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The caller must ensure that the buffer sent to this function contains at least <code><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a4cf882fe60d48ddd3beaf278db212ef7" title="Returns the latency in samples of the detection algorithm.">getLatencySamples()</a></code> samples. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The pitch in Hz for this frame of audio, or 0 if the frame is unpitched. </dd></dl>

</div>
</div>
<a id="a359eea93618220f8ce82fa28d24c9353"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a359eea93618220f8ce82fa28d24c9353">&#9670;&nbsp;</a></span>detectPitch() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;Sample SampleType&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SampleType <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">limes::dsp::psola::PitchDetector</a>&lt; SampleType &gt;::detectPitch </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a1febe22aa26291b78b1959fd9cbb08e7">SampleVector</a> &amp;&#160;</td>
          <td class="paramname"><em>inputAudio</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Detects the pitch in Hz for a frame of audio. </p>
<p>This can only be used for one channel at a time. If you need to track the pitch of multiple channels of audio, you need one <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">PitchDetector</a> object for each channel. The caller must ensure that there are at least enough samples in this frame of audio for analysis to be performed; ie, that numSamples is greater than or equal to <code><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a4cf882fe60d48ddd3beaf278db212ef7" title="Returns the latency in samples of the detection algorithm.">getLatencySamples()</a></code>. </p><dl class="section note"><dt>Note</dt><dd>You must call <code><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a8cad6007fd0a2c642b4aa47af41c5e26" title="Sets the samplerate in Hz of the pitch detector.">setSamplerate()</a></code> to prepare the pitch detector before calling this function! </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The caller must ensure that the buffer sent to this function contains at least <code><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a4cf882fe60d48ddd3beaf278db212ef7" title="Returns the latency in samples of the detection algorithm.">getLatencySamples()</a></code> samples. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The pitch in Hz for this frame of audio, or 0 if the frame is unpitched. </dd></dl>

</div>
</div>
<a id="afecb34f51d61ea6083fe1cf20750442d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afecb34f51d61ea6083fe1cf20750442d">&#9670;&nbsp;</a></span>getCurrentLegalPeriodRange()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;Sample SampleType&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">limes::dsp::psola::PitchDetector</a>&lt; SampleType &gt;::getCurrentLegalPeriodRange </td>
          <td>(</td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the current legal period range for the last analyzed frame of audio. </p>
<p>Because the detector assumes that the input pitch should not halve or double between consecutive pitched frames, this can be used to introspect the range of valid periods that the detector has actually considered for the most recent frame. Note that you must call one of the pitch detection functions before calling this function. </p>

</div>
</div>
<a id="a4cf882fe60d48ddd3beaf278db212ef7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cf882fe60d48ddd3beaf278db212ef7">&#9670;&nbsp;</a></span>getLatencySamples()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;Sample SampleType&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">limes::dsp::psola::PitchDetector</a>&lt; SampleType &gt;::getLatencySamples </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the latency in samples of the detection algorithm. </p>
<p>The latency is equal to 2 * the period of the lowest detectable frequency. Therefore, pitch detectors with a higher minimum frequency will have a lower latency.</p>
<p>The latency defines the minimum size of the buffers that must be sent to any of the detection functions, though you can send larger buffers if you wish. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#ae80853bc6dc61a8e568b677a0e352be1" title="Sets the minimum detectable frequency for the pitch detector.">setMinHz()</a> </dd></dl>

</div>
</div>
<a id="a9107221fa4c44e8c75374ddc89ceb222"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9107221fa4c44e8c75374ddc89ceb222">&#9670;&nbsp;</a></span>getMinHz()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;Sample SampleType&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">limes::dsp::psola::PitchDetector</a>&lt; SampleType &gt;::getMinHz </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the minimum frequency in Hz that this pitch detector is configured to detect. </p>

</div>
</div>
<a id="a3c566764e1431c5bda0002634366b9f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c566764e1431c5bda0002634366b9f9">&#9670;&nbsp;</a></span>releaseResources()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;Sample SampleType&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">limes::dsp::psola::PitchDetector</a>&lt; SampleType &gt;::releaseResources </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Releases all of the pitch detector's internal resources. </p>
<p>After calling this function, you must call <code><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a8cad6007fd0a2c642b4aa47af41c5e26" title="Sets the samplerate in Hz of the pitch detector.">setSamplerate()</a></code> to re-prepare the detector before calling any of the pitch detection functions. </p><dl class="section note"><dt>Note</dt><dd>This function may deallocate memory, so should not be called from a realtime thread. </dd></dl>

</div>
</div>
<a id="ac96adde0c5cebf27e7798fb0716bcb8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac96adde0c5cebf27e7798fb0716bcb8f">&#9670;&nbsp;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;Sample SampleType&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">limes::dsp::psola::PitchDetector</a>&lt; SampleType &gt;::reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Resets the internal state of the pitch detector without releasing any resources. </p>
<p>The pitch detector assumes that the input pitch will not halve or double between consecutive pitched frames of audio, so if your input audio is expected to make jumps that large in its pitch, you can call <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#ac96adde0c5cebf27e7798fb0716bcb8f" title="Resets the internal state of the pitch detector without releasing any resources.">reset()</a> before analyzing the next input frame of audio. This function is safe to call from a realtime thread. </p>

</div>
</div>
<a id="a590978d795d1c10924e5f9f4b90f01ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a590978d795d1c10924e5f9f4b90f01ab">&#9670;&nbsp;</a></span>setConfidenceThresh()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;Sample SampleType&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">limes::dsp::psola::PitchDetector</a>&lt; SampleType &gt;::setConfidenceThresh </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>newThresh</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the confidence threshold of the pitch detection algorithm. </p>
<p>This value should be between 0 and 1, inclusive, and can be thought of as the amount of aperiodic power tolerable in a signal determined to be pitched. In other words, the lower this value is, the "stricter" the pitch detector is in choosing its pitch estimates. When this value is 1, the pitch detector might output a "pitch" value for a frame of random noise; when this value is 0, the pitch detector might say that even a perfect, pure sine wave is "unpitched". Typical recommended values are between 0.1 and 0.3. </p>

</div>
</div>
<a id="ae80853bc6dc61a8e568b677a0e352be1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae80853bc6dc61a8e568b677a0e352be1">&#9670;&nbsp;</a></span>setMinHz()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;Sample SampleType&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">limes::dsp::psola::PitchDetector</a>&lt; SampleType &gt;::setMinHz </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>newMinHz</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the minimum detectable frequency for the pitch detector. </p>
<p>The latency of the algorithm is determined by 2 * the period of the minimum frequency. Therefore, pitch detectors with a higher minimum frequency will have a lower latency. </p><dl class="section note"><dt>Note</dt><dd>The pitch detector may report a frequency slightly lower than this, due to its usage of interpolation to attempt to find the most accurate period. </dd>
<dd>
This function may allocate memory, so should not be called from a realtime thread. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The latency, in samples, of the pitch detection algorithm with the new minimum frequency. </dd></dl>

</div>
</div>
<a id="a8cad6007fd0a2c642b4aa47af41c5e26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cad6007fd0a2c642b4aa47af41c5e26">&#9670;&nbsp;</a></span>setSamplerate()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;Sample SampleType&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">limes::dsp::psola::PitchDetector</a>&lt; SampleType &gt;::setSamplerate </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>newSamplerate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the samplerate in Hz of the pitch detector. </p>
<dl class="section note"><dt>Note</dt><dd>This function may allocate memory, so should not be called from a realtime thread. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The latency, in samples, of the pitch detection algorithm at the new samplerate. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html#a4cf882fe60d48ddd3beaf278db212ef7" title="Returns the latency in samples of the detection algorithm.">getLatencySamples()</a> </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="../../dc/ddf/_pitch_detector_8h_source.html">PitchDetector.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d9/d44/namespacelimes.html">limes</a></li><li class="navelem"><a class="el" href="../../d4/d00/namespacelimes_1_1dsp.html">dsp</a></li><li class="navelem"><a class="el" href="../../d6/d4e/namespacelimes_1_1dsp_1_1psola.html">psola</a></li><li class="navelem"><a class="el" href="../../d5/d03/classlimes_1_1dsp_1_1psola_1_1_pitch_detector.html">PitchDetector</a></li>
    <li class="footer">Generated on Tue Jun 7 2022 05:11:52 for Limes by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
